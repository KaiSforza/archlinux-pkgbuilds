pkgname=dwmstatus-git
_pkgname=dwmstatus
pkgver=v0.4.0.0.g9c2f70b
pkgrel=1
pkgdesc="A simple C status bar for dwm"
url="http://dwm.suckless.org/dwmstatus/"
arch=('i686' 'x86_64')
license=('MIT')
options=(zipman)
makedepends=('git' 'clang')
provides=('dwmstatus')
conflicts=('dwmstatus')
source=(git+file:///home/wgiokas/git/KaiSforza/dwmstatus#branch=working
        config.h)
#source=(git@bitbucket.org:KaiSforza/dwmstatus.git)
md5sums=('SKIP'
         'SKIP')


pkgver() {
  cd "$srcdir/$_pkgname"
  git describe --tags --long --always | tr - .
}

prepare() {
  cp "$srcdir/config.h" "$srcdir/$_pkgname"
  sed -i "s/VERSION = .*/VERSION = ${pkgver}-${pkgrel}/g" ${srcdir}/${_pkgname}/config.mk
}

build() {
  cd "$srcdir/$_pkgname"
  make CC=clang PREFIX=/usr
}

package() {
  cd "$srcdir/$_pkgname"
  make PREFIX=/usr DESTDIR=$pkgdir install
}

# vim:set ts=2 sw=2 et:
